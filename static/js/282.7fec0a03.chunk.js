"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[282],{1112:function(e,t,r){r.d(t,{Z:function(){return a}});var n="title-page_titlePage__ZBar5",s=r(184),a=function(e){var t=e.children;return(0,s.jsx)("h2",{className:n,children:t})}},8178:function(e,t){t.Z=function(e){var t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(n,"-").concat(r,"-").concat(t)}},9282:function(e,t,r){r.r(t),r.d(t,{default:function(){return Fe}});var n=r(9439),s="products_wrapper__dIgK4",a="products_productsPage__NqW3z",c=r(1112),o=r(5861),i=r(4942),u=r(1413),d=r(4687),l=r.n(d),p="ProductsFilters_filters__z4dz4",h="ProductsFilters_text__ZAjtR",m="ProductsFilters_search__woo7r",f="ProductsFilters_input__fjAQm",_="ProductsFilters_svgSearchClose__1z2l4",g="ProductsFilters_svgSearch__1owZG",v="ProductsFilters_arrowCat__4HYoZ",x="ProductsFilters_arrowRec__C3G7R",j="ProductsFilters_categories__S10h+",w="ProductsFilters_filterListWrapper__KZ0fq",y="ProductsFilters_filterList__WzNBS",N="ProductsFilters_recommended__ckk4J",b="ProductsFilters_recommendedList__sflg6",P="ProductsFilters_filterLabel__hiLwC",C="ProductsFilters_filterItem__kbeJy",Z=r(4865),I=r(2791),k=r(1617),S=r(4420),F=function(e){return e.products.products.items},A=function(e){return e.products.products.error},W=function(e){return e.products.filter},V=function(e){return e.products.products.success},O=r(6080),M=r(184),R={category:!1,allowed:!1},B=function(){var e=(0,S.I0)(),t=(0,I.useState)(null),r=(0,n.Z)(t,2),s=r[0],a=r[1],c=(0,I.useState)(""),d=(0,n.Z)(c,2),F=d[0],A=d[1],V=(0,I.useState)(R),B=(0,n.Z)(V,2),T=B[0],E=B[1],L=(0,S.v9)(W),z=function(e){var t=e.currentTarget.dataset.type;E((function(e){return(0,u.Z)((0,u.Z)({},R),{},(0,i.Z)({},t,!e[t]))}))},D=function(t){if("LI"===t.target.nodeName){var r,n=t.currentTarget.dataset.type;r="Recommended"===t.target.textContent?"yes":"Not recommended"===t.target.textContent?"no":t.target.textContent;var s=(0,u.Z)((0,u.Z)({},L),{},(0,i.Z)({},n,r));e((0,O.K)(s)),e((0,k.t)(s)),E(R)}};return(0,I.useEffect)((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.p)();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,M.jsxs)("div",{className:p,children:[(0,M.jsx)("p",{className:h,children:"Filters"}),(0,M.jsxs)("div",{className:m,children:[(0,M.jsx)("svg",{className:g,children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-search")})}),(0,M.jsx)("input",{className:f,type:"text",placeholder:"Search",id:"productsSearch",onChange:function(t){console.log(t.target.value),A(t.target.value);var r=(0,u.Z)((0,u.Z)({},L),{},{searchQuery:t.target.value});e((0,O.K)(r)),e((0,k.t)(r))},value:F}),(0,M.jsx)("svg",{className:_,onClick:function(){A("")},children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-close-in-search")})})]}),(0,M.jsxs)("div",{className:j,children:[(0,M.jsx)("p",{className:P,onClick:z,"data-type":"category",children:""===L.category?"Categories":L.category}),(0,M.jsx)("svg",{className:"".concat(g," ").concat(T.category?v:""),children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-arrow-down")})}),T.category&&(0,M.jsx)("div",{className:w,children:(0,M.jsx)("ul",{className:y,onClick:D,"data-type":"category",children:s.map((function(e,t){return(0,M.jsx)("li",{className:C,children:e},t)}))})})]}),(0,M.jsxs)("div",{className:N,children:[(0,M.jsxs)("p",{className:P,onClick:z,"data-type":"allowed",children:["All"===L.allowed&&"All","yes"===L.allowed&&"Recommended","no"===L.allowed&&"Not recommended"]}),(0,M.jsx)("svg",{className:"".concat(g," ").concat(T.allowed?x:""),children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-arrow-down")})}),T.allowed&&(0,M.jsxs)("ul",{className:b,onClick:D,"data-type":"allowed",children:[(0,M.jsx)("li",{className:C,children:"All"}),(0,M.jsx)("li",{className:C,children:"Recommended"}),(0,M.jsx)("li",{className:C,children:"Not recommended"})]})]})]})},T="ProductsList_productsList__3HQgi",E={card:"ProductsItem_card__gjyRG",upperContent:"ProductsItem_upperContent__l27qW",dietWrapper:"ProductsItem_dietWrapper__Xyk2v",diet:"ProductsItem_diet__W066o",cardStatus:"ProductsItem_cardStatus__P-act",statusCircle:"ProductsItem_statusCircle__hjnsp",statusText:"ProductsItem_statusText__i1toM",statusBtn:"ProductsItem_statusBtn__MrhqO",svgBtn:"ProductsItem_svgBtn__KFoGl",titleWrapper:"ProductsItem_titleWrapper__IFVpr",title:"ProductsItem_title__1gcfl",svgWrapper:"ProductsItem_svgWrapper__kCnB1",lowerConten:"ProductsItem_lowerConten__M0k+d",svgTitle:"ProductsItem_svgTitle__GGUz7",cardInfo:"ProductsItem_cardInfo__7qxc7",infoContent:"ProductsItem_infoContent__RQ2VM",amount:"ProductsItem_amount__oBuGW"},L=r(4925),z=r(5671),D=r(3144),q=r(7326),G=r(136),Y=r(7277),K=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"],U=Object.defineProperty,Q=function(e,t,r){return function(e,t,r){t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==typeof t?t+"":t,r),r},J=new Map,X=new WeakMap,H=0,$=void 0;function ee(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(r=e.root)?(X.has(r)||(H+=1,X.set(r,H.toString())),X.get(r)):"0":e[t]);var r})).toString()}function te(e){var t=ee(e),r=J.get(t);if(!r){var n,s=new Map,a=new IntersectionObserver((function(t){t.forEach((function(t){var r,a=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(r=s.get(t.target))||r.forEach((function(e){e(a,t)}))}))}),e);n=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:a,elements:s},J.set(t,r)}return r}function re(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$;if("undefined"===typeof window.IntersectionObserver&&void 0!==n){var s=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"===typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),function(){}}var a=te(r),c=a.id,o=a.observer,i=a.elements,u=i.get(e)||[];return i.has(e)||i.set(e,u),u.push(t),o.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(i.delete(e),o.unobserve(e)),0===i.size&&(o.disconnect(),J.delete(c))}}I.Component;var ne=r(4494),se=function(e){var t=e.data,r=e.openModal,s=(0,S.I0)(),a=(0,S.v9)((function(e){return e.profile.blood})),c=t.calories,o=t.category,i=t.title,u=t.weight,d=t.groupBloodNotAllowed,l=i[0].toUpperCase()+i.slice(1).toLowerCase(),p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.threshold,s=t.delay,a=t.trackVisibility,c=t.rootMargin,o=t.root,i=t.triggerOnce,u=t.skip,d=t.initialInView,l=t.fallbackInView,p=t.onChange,h=I.useState(null),m=(0,n.Z)(h,2),f=m[0],_=m[1],g=I.useRef(),v=I.useState({inView:!!d,entry:void 0}),x=(0,n.Z)(v,2),j=x[0],w=x[1];g.current=p,I.useEffect((function(){var e;if(!u&&f)return e=re(f,(function(t,r){w({inView:t,entry:r}),g.current&&g.current(t,r),r.isIntersecting&&i&&e&&(e(),e=void 0)}),{root:o,rootMargin:c,threshold:r,trackVisibility:a,delay:s},l),function(){e&&e()}}),[Array.isArray(r)?r.toString():r,f,o,c,i,u,a,l,s]);var y=null==(e=j.entry)?void 0:e.target,N=I.useRef();f||!y||i||u||N.current===y||(N.current=y,w({inView:!!d,entry:void 0}));var b=[_,j.inView,j.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}({threshold:.5,triggerOnce:!0}),h=p.ref,m=p.inView;return(0,M.jsx)("li",{className:E.card,ref:h,children:m&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:E.upperContent,children:[(0,M.jsx)("div",{className:E.dietWrapper,children:(0,M.jsx)("p",{className:E.diet,children:"diet"})}),(0,M.jsxs)("div",{className:E.cardStatus,children:[(0,M.jsx)("svg",{className:E.statusCircle,children:d[a]?(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-circle-green")}):(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-circle-red")})}),(0,M.jsx)("p",{className:E.statusText,children:d[a]?"Recommended":"Not recommended"}),(0,M.jsxs)("button",{type:"button",className:E.statusBtn,onClick:function(){r(t),s((0,ne.s)(!1))},children:["Add",(0,M.jsx)("svg",{className:E.svgBtn,children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-next-arrow")})})]})]})]}),(0,M.jsxs)("div",{className:E.lowerContent,children:[(0,M.jsxs)("div",{className:E.titleWrapper,children:[(0,M.jsx)("div",{className:E.svgWrapper,children:(0,M.jsx)("svg",{className:E.svgTitle,children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-runningMan")})})}),(0,M.jsx)("h3",{className:E.title,children:l})]}),(0,M.jsxs)("div",{className:E.cardInfo,children:[(0,M.jsxs)("div",{className:E.infoContent,children:["Calories: ",(0,M.jsx)("span",{className:E.amount,children:c})]}),(0,M.jsxs)("div",{className:E.infoContent,children:["Category: ",(0,M.jsx)("span",{className:E.amount,children:o})]}),(0,M.jsxs)("div",{className:E.infoContent,children:["Weight: ",(0,M.jsx)("span",{className:E.amount,children:u})]})]})]})]})})},ae="ProduxError_errorWrapper__pgxZp",ce="ProduxError_errorText__jdsbz",oe="ProduxError_textAccent__fjY4Z",ie=function(){return(0,M.jsxs)("div",{className:ae,children:[(0,M.jsxs)("p",{className:ce,children:[(0,M.jsx)("span",{className:oe,children:"Sorry, no results were found"})," for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."]}),(0,M.jsx)("p",{className:"".concat(ce," ").concat(oe),children:"Try changing the search parameters."})]})},ue=function(e){var t=e.openModal,r=(0,S.I0)(),n=(0,S.v9)(F),s=(0,S.v9)(A);return(0,I.useEffect)((function(){r((0,k.t)())}),[r]),(0,M.jsx)(M.Fragment,{children:s?(0,M.jsx)(ie,{}):(0,M.jsx)("ul",{className:T,children:n&&n.map((function(e){return(0,M.jsx)(se,{data:e,openModal:t},e._id)}))})})},de="Container_mainContainer__5G8IR",le=function(e){var t=e.children;return(0,M.jsx)("div",{className:de,children:t})},pe="AddProductForm_form__fgIYO",he="AddProductForm_input__2UVf4",me="AddProductForm_inputWrapper__oYjIF",fe="AddProductForm_grams__vl4F6",_e="AddProductForm_count__3dYxF",ge="AddProductForm_calories__Z5sww",ve="AddProductForm_btnWrapper__P5TXq",xe="AddProductForm_btnAdd__aEYNT",je="AddProductForm_btnCansel__JEaU9",we=r(8178),ye=r(7120),Ne=function(e){return e.diary.error},be=function(e){var t=e.data,r=(0,I.useState)(0),s=(0,n.Z)(r,2),a=s[0],c=s[1],o=(0,S.I0)(),i=(0,S.v9)(Ne),u=t.calories,d=t.title,l=t._id,p=a*u/100;return(0,M.jsxs)("form",{className:pe,onSubmit:function(e){e.preventDefault();var t=new Date,r=(0,we.Z)(t),n={productId:l,date:r,grams:Number(e.target.elements.amount.value),calories:Math.floor(p)};console.log(i),o((0,ye.Re)(n)),!i&&o((0,ne.s)(!0))},children:[(0,M.jsx)("input",{type:"text",className:he,value:d,name:"title",disabled:!0}),(0,M.jsxs)("div",{className:me,children:[(0,M.jsx)("input",{type:"number",className:"".concat(he," ").concat(_e),onChange:function(e){c(e.target.value)},name:"amount",required:!0}),(0,M.jsx)("p",{className:fe,children:"grams"})]}),(0,M.jsxs)("p",{className:ge,children:["Calories: ",(0,M.jsx)("span",{className:_e,children:Math.floor(p)})]}),(0,M.jsxs)("div",{className:ve,children:[(0,M.jsx)("button",{type:"submit",className:xe,children:"Add to diary"}),(0,M.jsx)("button",{type:"button",className:je,"data-type":"close-modal",children:"Cancel"})]})]})},Pe="BasicModalWindow_backdrop__S-RX6",Ce="BasicModalWindow_modal__bxnFf",Ze="BasicModalWindow_modalCloseBtn__PzRfu",Ie="BasicModalWindow_svgclose__hfpF1",ke=function(e){var t=e.isOpen,r=e.onClose,n=e.children;if(!t)return null;t&&document.addEventListener("keydown",(function e(t){if("Escape"===t.code)return console.log("Escape"),r(),document.removeEventListener("keydown",e)}));var s=function(e){"backdrop"!==e.target.dataset.type&&"close-modal"!==e.target.dataset.type||r()};return(0,M.jsx)("div",{className:Pe,onClick:s,"data-type":"backdrop",children:(0,M.jsxs)("div",{className:Ce,children:[(0,M.jsx)("button",{className:Ze,type:"button",onClick:s,"data-type":"close-modal",children:(0,M.jsx)("svg",{className:Ie,children:(0,M.jsx)("use",{href:"".concat(Z.Z,"#icon-close-modal")})})}),n]})})},Se=function(){return(0,M.jsx)("p",{children:"Success"})},Fe=function(){var e=(0,I.useState)(!1),t=(0,n.Z)(e,2),r=t[0],o=t[1],i=(0,I.useState)(null),u=(0,n.Z)(i,2),d=u[0],l=u[1],p=(0,S.v9)(V),h=(0,S.v9)((function(e){return e.products}));console.log(h),console.log(p);return(0,M.jsxs)("div",{className:a,children:[(0,M.jsx)(le,{children:(0,M.jsxs)("div",{className:s,children:[(0,M.jsx)(c.Z,{children:"Products",className:s}),(0,M.jsx)(B,{}),(0,M.jsx)(ue,{openModal:function(e){o(!0),l(e)}})]})}),(0,M.jsx)(ke,{isOpen:r,onClose:function(e){o(!1)},children:p?(0,M.jsx)(Se,{}):(0,M.jsx)(be,{data:d})})]})}},7120:function(e,t,r){r.d(t,{Re:function(){return d},Wq:function(){return l},hw:function(){return u},xm:function(){return p}});var n=r(5861),s=r(4687),a=r.n(s),c=r(7520),o=r(5294),i=r(5985);o.Z.defaults.baseURL="https://power-pulse-backend.onrender.com/";var u=(0,c.hg)("fetchAllDiary",function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.Z.get("/diary".concat(t));case 4:return s=e.sent,c=s.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),i.Am.error("Oops... Something went wrong! Try again!"),e.abrupt("return",n("Oops... Something went wrong!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),d=(0,c.hg)("addProductDiary",function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.Z.post("/diary/products",t);case 4:return s=e.sent,c=s.data,console.log("productDetailsAdd",t),i.Am.success("Product successfully added to diary!"),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(1),i.Am.error("Oops... Something went wrong! Try again!"),e.abrupt("return",n("Oops... Something went wrong!"));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()),l=(0,c.hg)("deleteProductDiary",function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.Z.delete("/diary/products:productId",{productId:t});case 4:return s=e.sent,c=s.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),i.Am.error("Oops... Something went wrong! Try again!"),e.abrupt("return",n("Oops... Something went wrong!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),p=((0,c.hg)("addExercisesDiary",function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.Z.post("/diary/exercises",t);case 4:return s=e.sent,c=s.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),i.Am.error("Oops... Something went wrong! Try again!"),e.abrupt("return",n("Oops... Something went wrong!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,c.hg)("deleteExercisesDiary",function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.Z.delete("/diary/exercises/:exerciseId",{exerciseId:t});case 4:return s=e.sent,c=s.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),i.Am.error("Oops... Something went wrong! Try again!"),e.abrupt("return",n("Oops... Something went wrong!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()))}}]);
//# sourceMappingURL=282.7fec0a03.chunk.js.map