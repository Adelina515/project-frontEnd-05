"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[167],{1112:function(e,t,r){r.d(t,{Z:function(){return c}});var n="title-page_titlePage__ZBar5",s=r(184),c=function(e){var t=e.children;return(0,s.jsx)("h2",{className:n,children:t})}},175:function(e,t,r){r.d(t,{a:function(){return a}});var n="loader_loaderWrap__G6Krn",s="loader_loader__M-FUL",c=r(184),a=function(){return(0,c.jsx)("div",{className:n,children:(0,c.jsx)("span",{className:s})})}},8178:function(e,t){t.Z=function(e){var t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(n,"-").concat(r,"-").concat(t)}},8181:function(e,t,r){r.d(t,{m:function(){return u}});var n=r(4865),s="BasicModalWindow_backdrop__S-RX6",c="BasicModalWindow_modal__bxnFf",a="BasicModalWindow_modalCloseBtn__PzRfu",o="BasicModalWindow_svgclose__hfpF1",i=r(184),u=function(e){var t=e.isOpen,r=e.onClose,u=e.children;if(!t)return null;document.body.style.overflow="hidden";t&&document.addEventListener("keydown",(function e(t){if("Escape"===t.code)return console.log("Escape"),r(),document.body.style.overflow="scroll",document.removeEventListener("keydown",e)}));var d=function(e){"backdrop"!==e.target.dataset.type&&"close-modal"!==e.target.dataset.type||(document.body.style.overflow="scroll",r())};return(0,i.jsx)("div",{className:s,onClick:d,"data-type":"backdrop",children:(0,i.jsxs)("div",{className:c,children:[(0,i.jsx)("button",{className:a,type:"button",onClick:d,"data-type":"close-modal",children:(0,i.jsx)("svg",{className:o,children:(0,i.jsx)("use",{href:"".concat(n.Z,"#icon-close-modal")})})}),u]})})}},2402:function(e,t,r){r.r(t),r.d(t,{default:function(){return Oe}});var n=r(9439),s="products_productsPage__NqW3z",c="products_wrapper__dIgK4",a=r(1112),o=r(5861),i=r(4942),u=r(1413),d=r(4687),l=r.n(d),f="ProductsFilters_filters__z4dz4",m="ProductsFilters_text__ZAjtR",_="ProductsFilters_search__woo7r",h="ProductsFilters_input__fjAQm",p="ProductsFilters_svgSearchClose__1z2l4",v="ProductsFilters_svgSearch__1owZG",x="ProductsFilters_arrowCat__4HYoZ",g="ProductsFilters_arrowRec__C3G7R",j="ProductsFilters_categories__S10h+",y="ProductsFilters_filterListWrapper__KZ0fq",N="ProductsFilters_filterList__WzNBS",w="ProductsFilters_recommended__ckk4J",P="ProductsFilters_recommendedList__sflg6",b="ProductsFilters_filterLabel__hiLwC",C="ProductsFilters_filterItem__kbeJy",Z=r(4865),I=r(2791),F=r(1617),S=r(4420),k=function(e){return e.products.products.items},A=function(e){return e.products.products.isLoading},W=function(e){return e.products.products.error},R=function(e){return e.products.filter},M=function(e){return e.products.products.success},B=r(6080);function T(e,t,r){var n=this,s=(0,I.useRef)(null),c=(0,I.useRef)(0),a=(0,I.useRef)(null),o=(0,I.useRef)([]),i=(0,I.useRef)(),u=(0,I.useRef)(),d=(0,I.useRef)(e),l=(0,I.useRef)(!0);d.current=e;var f="undefined"!=typeof window,m=!t&&0!==t&&f;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var _=!!(r=r||{}).leading,h=!("trailing"in r)||!!r.trailing,p="maxWait"in r,v="debounceOnServer"in r&&!!r.debounceOnServer,x=p?Math.max(+r.maxWait||0,t):null;(0,I.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]);var g=(0,I.useMemo)((function(){var e=function(e){var t=o.current,r=i.current;return o.current=i.current=null,c.current=e,u.current=d.current.apply(r,t)},r=function(e,t){m&&cancelAnimationFrame(a.current),a.current=m?requestAnimationFrame(e):setTimeout(e,t)},g=function(e){if(!l.current)return!1;var r=e-s.current;return!s.current||r>=t||r<0||p&&e-c.current>=x},j=function(t){return a.current=null,h&&o.current?e(t):(o.current=i.current=null,u.current)},y=function e(){var n=Date.now();if(g(n))return j(n);if(l.current){var a=t-(n-s.current),o=p?Math.min(a,x-(n-c.current)):a;r(e,o)}},N=function(){if(f||v){var d=Date.now(),m=g(d);if(o.current=[].slice.call(arguments),i.current=n,s.current=d,m){if(!a.current&&l.current)return c.current=s.current,r(y,t),_?e(s.current):u.current;if(p)return r(y,t),e(s.current)}return a.current||r(y,t),u.current}};return N.cancel=function(){a.current&&(m?cancelAnimationFrame(a.current):clearTimeout(a.current)),c.current=0,o.current=s.current=i.current=a.current=null},N.isPending=function(){return!!a.current},N.flush=function(){return a.current?j(Date.now()):u.current},N}),[_,p,t,x,h,m,f,v]);return g}var E=r(184),V={category:!1,allowed:!1},L=function(){var e=(0,S.I0)(),t=(0,I.useState)(null),r=(0,n.Z)(t,2),s=r[0],c=r[1],a=(0,I.useState)(""),d=(0,n.Z)(a,2),k=d[0],A=d[1],W=(0,I.useState)(V),M=(0,n.Z)(W,2),L=M[0],O=M[1],D=(0,S.v9)(R),z=function(e){var t=e.currentTarget.dataset.type;O((function(e){return(0,u.Z)((0,u.Z)({},V),{},(0,i.Z)({},t,!e[t]))}))},q=function(t){if("LI"===t.target.nodeName){var r,n=t.currentTarget.dataset.type;r="Recommended"===t.target.textContent?"yes":"Not recommended"===t.target.textContent?"no":t.target.textContent;var s=(0,u.Z)((0,u.Z)({},D),{},(0,i.Z)({},n,r));e((0,B.K)(s)),e((0,F.t)(s)),O(V)}},K=T((function(t){var r=(0,u.Z)((0,u.Z)({},D),{},{searchQuery:t});e((0,B.K)(r)),e((0,F.t)(r))}),300);return(0,I.useEffect)((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.p)();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,E.jsxs)("div",{className:f,children:[(0,E.jsx)("p",{className:m,children:"Filters"}),(0,E.jsxs)("div",{className:_,children:[(0,E.jsx)("svg",{className:v,children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-search")})}),(0,E.jsx)("input",{className:h,type:"text",placeholder:"Search",id:"productsSearch",onChange:function(e){A(e.target.value),K(k)},value:k}),(0,E.jsx)("svg",{className:p,onClick:function(){A("");var t=(0,u.Z)((0,u.Z)({},D),{},{searchQuery:""});e((0,B.K)(t)),e((0,F.t)(t))},children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-close-in-search")})})]}),(0,E.jsxs)("div",{className:j,children:[(0,E.jsx)("p",{className:b,onClick:z,"data-type":"category",children:""===D.category?"Categories":D.category}),(0,E.jsx)("svg",{className:"".concat(v," ").concat(L.category?x:""),children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-arrow-down")})}),L.category&&(0,E.jsx)("div",{className:y,children:(0,E.jsx)("ul",{className:N,onClick:q,"data-type":"category",children:s.map((function(e,t){return(0,E.jsx)("li",{className:C,children:e},t)}))})})]}),(0,E.jsxs)("div",{className:w,children:[(0,E.jsxs)("p",{className:b,onClick:z,"data-type":"allowed",children:["All"===D.allowed&&"All","yes"===D.allowed&&"Recommended","no"===D.allowed&&"Not recommended"]}),(0,E.jsx)("svg",{className:"".concat(v," ").concat(L.allowed?g:""),children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-arrow-down")})}),L.allowed&&(0,E.jsxs)("ul",{className:P,onClick:q,"data-type":"allowed",children:[(0,E.jsx)("li",{className:C,children:"All"}),(0,E.jsx)("li",{className:C,children:"Recommended"}),(0,E.jsx)("li",{className:C,children:"Not recommended"})]})]})]})},O="ProductsList_productsList__3HQgi",D={card:"ProductsItem_card__gjyRG",upperContent:"ProductsItem_upperContent__l27qW",dietWrapper:"ProductsItem_dietWrapper__Xyk2v",diet:"ProductsItem_diet__W066o",cardStatus:"ProductsItem_cardStatus__P-act",statusCircle:"ProductsItem_statusCircle__hjnsp",statusText:"ProductsItem_statusText__i1toM",statusBtn:"ProductsItem_statusBtn__MrhqO",svgBtn:"ProductsItem_svgBtn__KFoGl",titleWrapper:"ProductsItem_titleWrapper__IFVpr",title:"ProductsItem_title__1gcfl",svgWrapper:"ProductsItem_svgWrapper__kCnB1",lowerConten:"ProductsItem_lowerConten__M0k+d",svgTitle:"ProductsItem_svgTitle__GGUz7",cardInfo:"ProductsItem_cardInfo__7qxc7",infoContent:"ProductsItem_infoContent__RQ2VM",amount:"ProductsItem_amount__oBuGW"},z=r(4925),q=r(5671),K=r(3144),Y=r(7326),G=r(136),U=r(7277),Q=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"],J=Object.defineProperty,X=function(e,t,r){return function(e,t,r){t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==typeof t?t+"":t,r),r},H=new Map,$=new WeakMap,ee=0,te=void 0;function re(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(r=e.root)?($.has(r)||(ee+=1,$.set(r,ee.toString())),$.get(r)):"0":e[t]);var r})).toString()}function ne(e){var t=re(e),r=H.get(t);if(!r){var n,s=new Map,c=new IntersectionObserver((function(t){t.forEach((function(t){var r,c=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=c),null==(r=s.get(t.target))||r.forEach((function(e){e(c,t)}))}))}),e);n=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:c,elements:s},H.set(t,r)}return r}function se(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:te;if("undefined"===typeof window.IntersectionObserver&&void 0!==n){var s=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"===typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),function(){}}var c=ne(r),a=c.id,o=c.observer,i=c.elements,u=i.get(e)||[];return i.has(e)||i.set(e,u),u.push(t),o.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(i.delete(e),o.unobserve(e)),0===i.size&&(o.disconnect(),H.delete(a))}}I.Component;var ce=r(4494),ae=function(e){var t=e.data,r=e.openModal,s=(0,S.I0)(),c=(0,S.v9)((function(e){return e.auth.user.blood})),a=t.calories,o=t.category,i=t.title,d=t.weight,l=t.groupBloodNotAllowed,f=i[0].toUpperCase()+i.slice(1).toLowerCase(),m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.threshold,s=t.delay,c=t.trackVisibility,a=t.rootMargin,o=t.root,i=t.triggerOnce,u=t.skip,d=t.initialInView,l=t.fallbackInView,f=t.onChange,m=I.useState(null),_=(0,n.Z)(m,2),h=_[0],p=_[1],v=I.useRef(),x=I.useState({inView:!!d,entry:void 0}),g=(0,n.Z)(x,2),j=g[0],y=g[1];v.current=f,I.useEffect((function(){var e;if(!u&&h)return e=se(h,(function(t,r){y({inView:t,entry:r}),v.current&&v.current(t,r),r.isIntersecting&&i&&e&&(e(),e=void 0)}),{root:o,rootMargin:a,threshold:r,trackVisibility:c,delay:s},l),function(){e&&e()}}),[Array.isArray(r)?r.toString():r,h,o,a,i,u,c,l,s]);var N=null==(e=j.entry)?void 0:e.target,w=I.useRef();h||!N||i||u||w.current===N||(w.current=N,y({inView:!!d,entry:void 0}));var P=[p,j.inView,j.entry];return P.ref=P[0],P.inView=P[1],P.entry=P[2],P}({threshold:.5,triggerOnce:!0}),_=m.ref,h=m.inView,p=(0,u.Z)((0,u.Z)({},t),{},{allowed:l[c]});return(0,E.jsx)("li",{className:D.card,ref:_,children:h&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:D.upperContent,children:[(0,E.jsx)("div",{className:D.dietWrapper,children:(0,E.jsx)("p",{className:D.diet,children:"diet"})}),(0,E.jsxs)("div",{className:D.cardStatus,children:[(0,E.jsx)("svg",{className:D.statusCircle,children:l[c]?(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-circle-green")}):(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-circle-red")})}),(0,E.jsx)("p",{className:D.statusText,children:l[c]?"Recommended":"Not recommended"}),(0,E.jsxs)("button",{type:"button",className:D.statusBtn,onClick:function(){r(p),s((0,ce.s)(!1))},children:["Add",(0,E.jsx)("svg",{className:D.svgBtn,children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-next-arrow")})})]})]})]}),(0,E.jsxs)("div",{className:D.lowerContent,children:[(0,E.jsxs)("div",{className:D.titleWrapper,children:[(0,E.jsx)("div",{className:D.svgWrapper,children:(0,E.jsx)("svg",{className:D.svgTitle,children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-runningMan")})})}),(0,E.jsx)("h3",{className:D.title,children:f})]}),(0,E.jsxs)("div",{className:D.cardInfo,children:[(0,E.jsxs)("div",{className:D.infoContent,children:["Calories: ",(0,E.jsx)("span",{className:D.amount,children:a})]}),(0,E.jsxs)("div",{className:D.infoContent,children:["Category: ",(0,E.jsx)("span",{className:D.amount,children:o})]}),(0,E.jsxs)("div",{className:D.infoContent,children:["Weight: ",(0,E.jsx)("span",{className:D.amount,children:d})]})]})]})]})})},oe="ProduxError_errorWrapper__pgxZp",ie="ProduxError_errorText__jdsbz",ue="ProduxError_textAccent__fjY4Z",de=function(){return(0,E.jsxs)("div",{className:oe,children:[(0,E.jsxs)("p",{className:ie,children:[(0,E.jsx)("span",{className:ue,children:"Sorry, no results were found"})," for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."]}),(0,E.jsx)("p",{className:"".concat(ie," ").concat(ue),children:"Try changing the search parameters."})]})},le=function(e){var t=e.openModal,r=(0,S.I0)(),n=(0,S.v9)(k),s=(0,S.v9)(W);return(0,I.useEffect)((function(){r((0,F.t)())}),[r]),(0,E.jsx)(E.Fragment,{children:s?(0,E.jsx)(de,{}):(0,E.jsx)("ul",{className:O,children:n&&n.map((function(e){return(0,E.jsx)(ae,{data:e,openModal:t},e._id)}))})})},fe=r(5700),me="AddProductForm_form__fgIYO",_e="AddProductForm_input__2UVf4",he="AddProductForm_inputWrapper__oYjIF",pe="AddProductForm_grams__vl4F6",ve="AddProductForm_count__3dYxF",xe="AddProductForm_calories__Z5sww",ge="AddProductForm_btnWrapper__P5TXq",je="AddProductForm_btnAdd__aEYNT",ye="AddProductForm_btnCansel__JEaU9",Ne=r(4195),we=r(3027),Pe=r(3402),be=function(e){var t=e.data,r=e.count,s=e.date,c=(0,I.useState)(0),a=(0,n.Z)(c,2),o=a[0],i=a[1],u=(0,S.I0)(),d=(0,S.v9)(we.QN),l=t.calories,f=t.title,m=t._id,_=t.allowed,h=o*l/100;return(0,E.jsxs)("form",{className:me,onSubmit:function(e){if(e.preventDefault(),0!==Number(e.target.elements.amount.value)){var n={allowed:_,productId:m,date:s,grams:Number(e.target.elements.amount.value),calories:Math.floor(h)};u((0,Ne.Re)({data:n,product:t})),d?Pe.ZP.error("Oops... Something went wrong! Try again!",{position:"top-right"}):u((0,ce.s)(!0)),r(Math.floor(h))}else Pe.ZP.error("Please, enter more than 0",{position:"top-right"})},children:[(0,E.jsx)("input",{type:"text",className:_e,value:f,name:"title",disabled:!0}),(0,E.jsxs)("div",{className:he,children:[(0,E.jsx)("input",{type:"number",className:"".concat(_e," ").concat(ve),onChange:function(e){i(e.target.value)},name:"amount",required:!0}),(0,E.jsx)("p",{className:pe,children:"grams"})]}),(0,E.jsxs)("p",{className:xe,children:["Calories: ",(0,E.jsx)("span",{className:ve,children:Math.floor(h)})]}),(0,E.jsxs)("div",{className:ge,children:[(0,E.jsx)("button",{type:"submit",className:je,children:"Add to diary"}),(0,E.jsx)("button",{type:"button",className:ye,"data-type":"close-modal",children:"Cancel"})]})]})},Ce=r(8181),Ze="AddProductSuccess_wrapper__KlMYU",Ie="AddProductSuccess_image__quAjn",Fe="AddProductSuccess_title__zLUB2",Se="AddProductSuccess_text__tgLBJ",ke="AddProductSuccess_count__kdIPi",Ae="AddProductSuccess_btnNext__EIX-p",We="AddProductSuccess_btnToDiary__8LD2W",Re="AddProductSuccess_svgBtn__zquNT",Me=r.p+"static/media/productSuccessFruit.cef0af9cd428fb7948bc.png",Be=r(1087),Te=function(e){var t=e.calories,r=(0,S.I0)();return(0,I.useEffect)((function(){r((0,Ne.hw)("2024-01-18"))}),[r]),(0,E.jsxs)("div",{className:Ze,children:[(0,E.jsx)("img",{src:Me,alt:"avokado",className:Ie}),(0,E.jsx)("h3",{className:Fe,children:"Well done"}),(0,E.jsxs)("p",{className:Se,children:["Calories: ",(0,E.jsx)("span",{className:ke,children:t})]}),(0,E.jsx)("button",{className:Ae,"data-type":"close-modal",children:"Next product"}),(0,E.jsxs)(Be.rU,{to:"/diary",className:We,children:["To the diary",(0,E.jsx)("svg",{className:Re,children:(0,E.jsx)("use",{href:"".concat(Z.Z,"#icon-next-arrow-gray")})})]})]})},Ee=r(7689),Ve=r(8178),Le=r(175),Oe=function(){var e=(0,I.useState)(!1),t=(0,n.Z)(e,2),r=t[0],o=t[1],i=(0,I.useState)(null),u=(0,n.Z)(i,2),d=u[0],l=u[1],f=(0,I.useState)(0),m=(0,n.Z)(f,2),_=m[0],h=m[1],p=(0,Ee.TH)(),v=p.state?p.state:(0,Ve.Z)(new Date),x=(0,S.v9)(M),g=(0,S.v9)(A),j=v;return(0,E.jsxs)("div",{className:s,children:[(0,E.jsx)(fe.W,{children:(0,E.jsxs)("div",{className:c,children:[(0,E.jsx)(a.Z,{children:"Products",className:c}),(0,E.jsx)(L,{}),g&&(0,E.jsx)(Le.a,{}),(0,E.jsx)(le,{openModal:function(e){o(!0),l(e)}})]})}),(0,E.jsx)(Ce.m,{isOpen:r,onClose:function(e){o(!1)},children:x?(0,E.jsx)(Te,{calories:_}):(0,E.jsx)(be,{data:d,count:function(e){h(e)},date:j})})]})}},3027:function(e,t,r){r.d(t,{KR:function(){return s},P3:function(){return n},QN:function(){return i},Tw:function(){return a},i_:function(){return o},kb:function(){return c}});var n=function(e){return e.diary.productsInDiary},s=function(e){return e.diary.exercisesInDiary},c=function(e){return e.diary.burnedCaloriesByDate},a=function(e){return e.diary.consumedCaloriesByDate},o=function(e){return e.diary.sportsRemaining},i=function(e){return e.diary.error}}}]);
//# sourceMappingURL=167.d470d081.chunk.js.map